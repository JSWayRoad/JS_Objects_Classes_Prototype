## Сборка мусора 

https://github.com/radomir-radionov/closures_and_objects  
https://learn.javascript.ru/garbage-collection

**Достижимость**
Основной концепцией управления памятью в JavaScript является **принцип достижимости**.

Если упростить, то «достижимые» значения – это те, которые доступны или используются. Они гарантированно находятся в памяти.

Существует базовое множество достижимых значений, которые не могут быть удалены.

Например:

Локальные переменные и параметры текущей функции.  
Переменные и параметры других функций в текущей цепочке вложенных вызовов.  
Глобальные переменные.  
(некоторые другие внутренние значения)  
Эти значения мы будем называть корнями. 

Любое другое значение считается достижимым, если оно доступно из корня по ссылке или по цепочке ссылок.
```
// в user находится ссылка на объект
let user = {
  name: "John"
};
```
Глобальная переменная user ссылается на объект {name: "John"} (мы будем называть его просто «John»). В свойстве "name" объекта John хранится примитив, поэтому оно нарисовано внутри объекта.

Если перезаписать значение user, то ссылка потеряется
```
user = null;
```
Теперь объект John становится недостижимым. К нему нет доступа, на него нет ссылок. Сборщик мусора удалит эти данные и освободит память.  
Исходящие ссылки не имеют значения. Только входящие ссылки могут сделать объект достижимым.

**Внутренние алгоритмы** 
Основной алгоритм сборки мусора – **алгоритм пометок** (англ. «mark-and-sweep»).

Согласно этому алгоритму, сборщик мусора регулярно выполняет следующие шаги:

Сборщик мусора «помечает» (запоминает) все корневые объекты.  
Затем он идёт по их ссылкам и помечает все найденные объекты.  
Затем он идёт по ссылкам помеченных объектов и помечает объекты, на которые есть ссылка от них. Все объекты запоминаются, чтобы в будущем не посещать один и тот же объект дважды.  
…И так далее, пока не будут посещены все ссылки (достижимые от корней).  
Все непомеченные объекты удаляются.

 «The Garbage Collection Handbook: The Art of Automatic Memory Management» (R. Jones и др.).
